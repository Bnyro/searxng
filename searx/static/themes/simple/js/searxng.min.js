/**
 * @license
 * (C) Copyright Contributors to the SearXNG project.
 * (C) Copyright Contributors to the searx project (2014 - 2021).
 * SPDX-License-Identifier: AGPL-3.0-or-later
 */window.searxng=function(m,s){m.Element&&function(i){i.matches=i.matches||i.matchesSelector||i.webkitMatchesSelector||i.msMatchesSelector||function(l){for(var o=this,t=(o.parentNode||o.document).querySelectorAll(l),n=-1;t[++n]&&t[n]!=o;);return!!t[n]}}(Element.prototype);function a(i,l,o){try{i.call(l,o)}catch(t){console.log(t)}}var f=window.searxng||{};f.on=function(i,l,o,t){t=t||!1,typeof i!="string"?i.addEventListener(l,o,t):s.addEventListener(l,function(n){for(var r=n.target||n.srcElement,u=!1;r&&r.matches&&r!==s&&!(u=r.matches(i));)r=r.parentElement;u&&a(o,r,n)},t)},f.ready=function(i){document.readyState!="loading"?i.call(m):m.addEventListener("DOMContentLoaded",i.bind(m))},f.http=function(i,l,o=null){return new Promise(function(t,n){try{var r=new XMLHttpRequest;r.open(i,l,!0),r.timeout=2e4,r.onload=function(){r.status==200?t(r.response,r.responseType):n(Error(r.statusText))},r.onerror=function(){n(Error("Network Error"))},r.onabort=function(){n(Error("Transaction is aborted"))},r.ontimeout=function(){n(Error("Timeout"))},o?r.send(o):r.send()}catch(u){n(u)}})},f.loadStyle=function(i){var l=f.settings.theme_static_path+"/"+i,o="style_"+i.replace(".","_"),t=s.getElementById(o);t===null&&(t=s.createElement("link"),t.setAttribute("id",o),t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",l),s.body.appendChild(t))},f.loadScript=function(i,l){var o=f.settings.theme_static_path+"/"+i,t="script_"+i.replace(".","_"),n=s.getElementById(t);if(n===null)n=s.createElement("script"),n.setAttribute("id",t),n.setAttribute("src",o),n.onload=l,n.onerror=function(){n.setAttribute("error","1")},s.body.appendChild(n);else if(n.hasAttribute("error"))console.log("callback not executed : script '"+o+"' not loaded.");else try{l.apply(n,[])}catch(r){console.log(r)}},f.insertBefore=function(i,l){l.parentNode.insertBefore(i,l)},f.insertAfter=function(i,l){l.parentNode.insertAfter(i,l.nextSibling)},f.on(".close","click",function(){this.parentNode.classList.add("invisible")});function g(){for(var i of s.getElementsByTagName("body")[0].classList.values())if(i.endsWith("_endpoint"))return i.split("_")[0];return""}return f.endpoint=g(),f}(window,document);searxng.ready(function(){if(searxng.infinite_scroll_supported="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,searxng.endpoint!=="results")return;if(!searxng.infinite_scroll_supported){console.log("IntersectionObserver not supported");return}let m=document;var s=m.getElementById("results").classList.contains("only_template_images");function a(){var i=m.createElement("div");return i.classList.add("loader"),i}function f(i,l){i.textContent="",l.forEach(o=>i.appendChild(o))}function g(i){var l=m.querySelector("#pagination form.next_page");if(l){f(m.querySelector("#pagination"),[a()]);var o=new FormData(l);searxng.http("POST",m.querySelector("#search").getAttribute("action"),o).then(function(t){var n=new DOMParser().parseFromString(t,"text/html"),r=n.querySelectorAll("#urls article"),u=n.querySelector("#pagination");m.querySelector("#pagination").remove(),r.length>0&&!s&&m.querySelector("#urls").appendChild(m.createElement("hr")),r.forEach(h=>{m.querySelector("#urls").appendChild(h)}),u&&(m.querySelector("#results").appendChild(u),i())}).catch(function(t){console.log(t);var n=m.createElement("div");n.textContent=searxng.settings.translations.error_loading_next_page,n.classList.add("dialog-error"),n.setAttribute("role","alert"),f(m.querySelector("#pagination"),[n])})}}if(searxng.settings.infinite_scroll&&searxng.infinite_scroll_supported){const i={rootMargin:"20rem"},l="article.result:last-child",o=new IntersectionObserver(t=>{const n=t[0];n.isIntersecting&&(o.unobserve(n.target),g(()=>o.observe(m.querySelector(l),i)))});o.observe(m.querySelector(l),i)}});searxng.ready(function(){function m(e){for(;e!==void 0;){if(e.classList.contains("detail"))return!0;if(e.classList.contains("result"))return!1;e=e.parentNode}return!1}function s(e){for(;e!==void 0;){if(e.classList.contains("result"))return e;e=e.parentNode}}function a(e){return e&&e.classList.contains("result-images")}searxng.on(".result","click",function(e){if(!m(e.target)){l(this)(!0,!0);let c=s(e.target);a(c)&&(e.preventDefault(),searxng.selectImage(c))}}),searxng.on(".result a","focus",function(e){if(!m(e.target)){let c=s(e.target);c&&c.getAttribute("data-vim-selected")===null&&l(c)(!0),a(c)&&searxng.selectImage(c)}},!0);var f={Escape:{key:"ESC",fun:t,des:"remove focus from the focused input",cat:"Control"},c:{key:"c",fun:A,des:"copy url of the selected result to the clipboard",cat:"Results"},h:{key:"h",fun:B,des:"toggle help window",cat:"Other"},i:{key:"i",fun:y,des:"focus on the search input",cat:"Control"},n:{key:"n",fun:r(),des:"go to next page",cat:"Results"},o:{key:"o",fun:S(!1),des:"open search result",cat:"Results"},p:{key:"p",fun:u(),des:"go to previous page",cat:"Results"},r:{key:"r",fun:o,des:"reload page from the server",cat:"Control"},t:{key:"t",fun:S(!0),des:"open the result in a new tab",cat:"Results"}},g={default:Object.assign({ArrowLeft:{key:"←",fun:l("up"),des:"select previous search result",cat:"Results"},ArrowRight:{key:"→",fun:l("down"),des:"select next search result",cat:"Results"}},f),vim:Object.assign({b:{key:"b",fun:d(-window.innerHeight),des:"scroll one page up",cat:"Navigation"},f:{key:"f",fun:d(window.innerHeight),des:"scroll one page down",cat:"Navigation"},u:{key:"u",fun:d(-window.innerHeight/2),des:"scroll half a page up",cat:"Navigation"},d:{key:"d",fun:d(window.innerHeight/2),des:"scroll half a page down",cat:"Navigation"},g:{key:"g",fun:v(-document.body.scrollHeight,"top"),des:"scroll to the top of the page",cat:"Navigation"},v:{key:"v",fun:v(document.body.scrollHeight,"bottom"),des:"scroll to the bottom of the page",cat:"Navigation"},k:{key:"k",fun:l("up"),des:"select previous search result",cat:"Results"},j:{key:"j",fun:l("down"),des:"select next search result",cat:"Results"},y:{key:"y",fun:A,des:"copy url of the selected result to the clipboard",cat:"Results"}},f)},i=g[searxng.settings.hotkeys]||g.default;searxng.on(document,"keydown",function(e){if(Object.prototype.hasOwnProperty.call(i,e.key)&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey){var c=e.target.tagName.toLowerCase();e.key==="Escape"?i[e.key].fun(e):(e.target===document.body||c==="a"||c==="button")&&(e.preventDefault(),i[e.key].fun())}});function l(e){return function(c,E){var w=document.querySelector(".result[data-vim-selected]"),k=e;if(w===null){if(w=document.querySelector(".result"),w===null)return;(e==="down"||e==="up")&&(k=w)}var p,b=document.querySelectorAll(".result");if(b=Array.from(b),typeof k!="string")p=k;else switch(k){case"visible":for(var _=document.documentElement.scrollTop||document.body.scrollTop,O=_+document.documentElement.clientHeight,T=0;T<b.length;T++){p=b[T];var q=p.offsetTop,C=q+p.clientHeight;if(C<=O&&q>_)break}break;case"down":p=b[b.indexOf(w)+1]||w;break;case"up":p=b[b.indexOf(w)-1]||w;break;case"bottom":p=b[b.length-1];break;case"top":default:p=b[0]}if(p){if(w.removeAttribute("data-vim-selected"),p.setAttribute("data-vim-selected","true"),!E){var x=p.querySelector("h3 a")||p.querySelector("a");x!==null&&x.focus()}c||h()}}}function o(){document.location.reload(!0)}function t(e){const c=e.target.tagName.toLowerCase();document.activeElement&&(c==="input"||c==="select"||c==="textarea")?document.activeElement.blur():searxng.closeDetail()}function n(e){return function(){var c=document.querySelector(e);c&&c.click()}}function r(){return n('nav#pagination .next_page button[type="submit"]')}function u(){return n('nav#pagination .previous_page button[type="submit"]')}function h(){var e=document.querySelector(".result[data-vim-selected]");if(e!==null){var c=document.documentElement.scrollTop||document.body.scrollTop,E=document.documentElement.clientHeight,w=e.offsetTop,k=w+e.clientHeight,p=120;if(e.previousElementSibling===null&&k<E){window.scroll(window.scrollX,0);return}if(c>w-p)window.scroll(window.scrollX,w-p);else{var b=c+E;b<k+p&&window.scroll(window.scrollX,k-E+p)}}}function d(e){return function(){window.scrollBy(0,e),l("visible")()}}function v(e,c){return function(){window.scrollTo(0,e),l(c)()}}function y(){window.scrollTo(0,0);var e=document.querySelector("#q");if(e.focus(),e.setSelectionRange){var c=e.value.length;e.setSelectionRange(c,c)}}function S(e){return function(){var c=document.querySelector(".result[data-vim-selected] h3 a");if(c===null&&(c=document.querySelector(".result[data-vim-selected] > a")),c!==null){var E=c.getAttribute("href");e?window.open(E):window.location.href=E}}}function I(e){var c={};for(var E in i){var w=i[E];c[w.cat]=c[w.cat]||[],c[w.cat].push(w)}var k=Object.keys(c).sort(function(C,x){return c[x].length-c[C].length});if(k.length!==0){var p='<a href="#" class="close" aria-label="close" title="close">×</a>';p+="<h3>How to navigate SearXNG with hotkeys</h3>",p+="<table>";for(var b=0;b<k.length;b++){var _=c[k[b]],O=b===k.length-1,T=b%2===0;T&&(p+="<tr>"),p+="<td>",p+="<h4>"+_[0].cat+"</h4>",p+='<ul class="list-unstyled">';for(var q in _)p+="<li><kbd>"+_[q].key+"</kbd> "+_[q].des+"</li>";p+="</ul>",p+="</td>",(!T||O)&&(p+="</tr>")}p+="</table>",e.innerHTML=p}}function B(){var e=document.querySelector("#vim-hotkeys-help");if(e==null){e=document.createElement("div"),e.id="vim-hotkeys-help",e.className="dialog-modal",I(e);var c=document.getElementsByTagName("body")[0];c.appendChild(e)}else{e.classList.toggle("invisible");return}}function A(){var e=document.querySelector(".result[data-vim-selected] h3 a");if(e===null)return;const c=e.getAttribute("href");navigator.clipboard.writeText(c)}searxng.scrollPageToSelected=h,searxng.selectNext=l("down"),searxng.selectPrevious=l("up")});(function(m,s,a){a.ready(function(){a.on(".searxng_init_map","click",function(f){this.classList.remove("searxng_init_map");var g=this.dataset.leafletTarget,i=parseFloat(this.dataset.mapLon),l=parseFloat(this.dataset.mapLat),o=parseFloat(this.dataset.mapZoom),t=JSON.parse(this.dataset.mapBoundingbox),n=JSON.parse(this.dataset.mapGeojson);a.loadStyle("css/leaflet.css"),a.loadScript("js/leaflet.js",function(){var r=null;if(t){var u=L.latLng(t[0],t[2]),h=L.latLng(t[1],t[3]);r=L.latLngBounds(u,h)}var d=L.map(g),v="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",y='Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',S=new L.TileLayer(v,{minZoom:1,maxZoom:19,attribution:y}),I="https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",B='Wikimedia maps | Maps data © <a href="https://openstreetmap.org">OpenStreetMap contributors</a>',A=new L.TileLayer(I,{minZoom:1,maxZoom:19,attribution:B});r?setTimeout(function(){d.fitBounds(r,{maxZoom:17})},0):i&&l&&(o?d.setView(new L.latLng(l,i),o):d.setView(new L.latLng(l,i),8)),d.addLayer(S);var e={"OSM Mapnik":S,"OSM Wikimedia":A};L.control.layers(e).addTo(d),n&&L.geoJson(n).addTo(d)}),f.preventDefault()})})})(window,document,window.searxng);(function(m,s,a){a.endpoint==="preferences"&&a.ready(function(){let f=null;function g(){f==null&&a.http("GET","engine_descriptions.json").then(function(r){f=JSON.parse(r);for(const[u,h]of Object.entries(f)){let d=s.querySelectorAll('[data-engine-name="'+u+'"] .engine-description');for(const v of d){let y=" (<i>"+a.settings.translations.Source+":&nbsp;"+h[1]+"</i>)";v.innerHTML=h[0]+y}}})}for(const r of s.querySelectorAll("[data-engine-name]"))a.on(r,"mouseenter",g);const i=s.querySelectorAll(".enable-all-engines"),l=s.querySelectorAll(".disable-all-engines"),o=s.querySelectorAll("tbody input[type=checkbox][class~=checkbox-onoff]"),t=r=>{for(const u of o)u.offsetParent!==null&&(u.checked=!r)};for(const r of i)a.on(r,"click",()=>t(!0));for(const r of l)a.on(r,"click",()=>t(!1));const n=s.querySelector("#copy-hash");a.on(n,"click",r=>{r.preventDefault(),navigator.clipboard.writeText(n.dataset.hash),n.innerText=n.dataset.copiedText})})})(window,document,window.searxng);(function(m,s,a){a.endpoint==="results"&&a.ready(function(){s.querySelectorAll("#urls img").forEach(o=>o.addEventListener("error",()=>{o.src=window.searxng.settings.theme_static_path+"/img/img_load_error.svg"},{once:!0})),s.querySelector("#search_url button#copy_url")&&(s.querySelector("#search_url button#copy_url").style.display="block"),a.on(".btn-collapse","click",function(){var o=this.getAttribute("data-btn-text-collapsed"),t=this.getAttribute("data-btn-text-not-collapsed"),n=this.getAttribute("data-target"),r=s.querySelector(n),u=this.innerHTML;this.classList.contains("collapsed")?u=u.replace(o,t):u=u.replace(t,o),this.innerHTML=u,this.classList.toggle("collapsed"),r.classList.toggle("invisible")}),a.on(".media-loader","click",function(){var o=this.getAttribute("data-target"),t=s.querySelector(o+" > iframe"),n=t.getAttribute("src");(n==null||n===!1)&&t.setAttribute("src",t.getAttribute("data-src"))}),a.on("#copy_url","click",function(){var o=this.parentElement.querySelector("pre");navigator.clipboard.writeText(o.innerText),this.innerText=this.dataset.copiedText});let f;const g=s.createElement("div");g.classList.add("loader");const i=new Image,l=(o,t)=>{f&&clearTimeout(f),f=setTimeout(()=>{i.src=o},1e3),i.onload=()=>{t(),g.remove()},i.onerror=()=>{g.remove()}};a.selectImage=o=>{if(s.getElementById("results").classList.add("image-detail-open"),window.location.hash="#image-viewer",a.scrollPageToSelected(),!o)return;const t=o.querySelector(".result-images-source img");if(!t)return;const n=t.getAttribute("data-src");if(!n)return;const r=o.querySelector(".image_thumbnail");t.src=r.src,o.querySelector(".detail").appendChild(g),l(n,()=>{t.src=n,t.removeAttribute("data-src")})},a.closeDetail=function(){s.getElementById("results").classList.remove("image-detail-open"),window.location.hash=="#image-viewer"&&window.history.back(),a.scrollPageToSelected()},a.on(".result-detail-close","click",o=>{o.preventDefault(),a.closeDetail()}),a.on(".result-detail-previous","click",o=>{o.preventDefault(),a.selectPrevious(!1)}),a.on(".result-detail-next","click",o=>{o.preventDefault(),a.selectNext(!1)}),window.addEventListener("hashchange",()=>{window.location.hash!="#image-viewer"&&a.closeDetail()}),s.querySelectorAll(".swipe-horizontal").forEach(o=>{o.addEventListener("swiped-left",function(){a.selectNext(!1)}),o.addEventListener("swiped-right",function(){a.selectPrevious(!1)})}),m.addEventListener("scroll",function(){var o=s.getElementById("backToTop"),t=document.documentElement.scrollTop||document.body.scrollTop,n=s.getElementById("results");o!==null&&(t>=100?n.classList.add("scrolling"):n.classList.remove("scrolling"))},!0)})})(window,document,window.searxng);(function(m,s,a){var f="q",g;function i(){if(g.value.length>0){var t=document.getElementById("search");setTimeout(t.submit.bind(t),0)}}function l(t){var n=document.getElementById("clear_search"),r=function(){t.value.length===0?n.classList.add("empty"):n.classList.remove("empty")};r(),n.addEventListener("click",function(u){t.value="",t.focus(),r(),u.preventDefault()}),t.addEventListener("input",r,!1)}const o=async t=>{let n;if(a.settings.method==="GET"){const r=new URLSearchParams;r.append("q",t),n=fetch("./autocompleter?"+r.toString())}else{const r=new FormData;r.append("q",t),n=fetch("./autocompleter",{method:"POST",body:r})}n.then(async function(r){const u=await r.json();if(!u)return;const h=s.querySelector(".autocomplete"),d=s.querySelector(".autocomplete ul");if(h.classList.add("open"),d.innerHTML="",!u[1]||u[1].length==0){const v=document.createElement("li");v.classList.add("no-item-found"),v.innerHTML=a.settings.translations.no_item_found,d.appendChild(v);return}for(let v of u[1]){const y=document.createElement("li");y.innerText=v,a.on(y,"click",()=>{g.value=v,s.querySelector("#search").submit(),h.classList.remove("open")}),d.appendChild(y)}})};a.ready(function(){g=s.getElementById(f);const t=s.querySelector(".autocomplete"),n=s.querySelector(".autocomplete ul");g!==null&&(l(g),a.settings.autocomplete&&(a.on(g,"input",()=>{const h=g.value;h.length<a.settings.autocomplete_min||setTimeout(()=>{h==g.value&&o(h)},300)}),a.on(g,"keyup",h=>{let d=-1;const v=n.children;for(let S=0;S<v.length;S++)if(v[S].classList.contains("active")){d=S;break}let y=-1;if(h.key==="ArrowUp"?(d>=0&&v[d].classList.remove("active"),y=(d-1+v.length)%v.length):h.key==="ArrowDown"?(d>=0&&v[d].classList.remove("active"),y=(d+1)%v.length):(h.key==="Tab"||h.key==="Enter")&&t.classList.remove("open"),y!=-1){const S=v[y];S.classList.add("active"),S.classList.contains("no-item-found")||(g.value=S.innerText)}}))),g!==null&&a.settings.search_on_category_select&&s.querySelector(".search_filters")!=null&&(a.on(s.getElementById("safesearch"),"change",i),a.on(s.getElementById("time_range"),"change",i),a.on(s.getElementById("language"),"change",i));const r=s.querySelectorAll("button.category_button");for(let h of r)a.on(h,"click",d=>{if(d.shiftKey){d.preventDefault(),h.classList.toggle("selected");return}const v=s.querySelectorAll("button.category_button.selected");for(let y of v)y.classList.remove("selected");h.classList.add("selected")});const u=s.querySelector("#search");u!=null&&a.on(u,"submit",h=>{h.preventDefault();const d=s.querySelector("#selected-categories");if(d){let v=[];for(let y of r)y.classList.contains("selected")&&v.push(y.name.replace("category_",""));d.value=v.join(",")}u.submit()})})})(window,document,window.searxng);
//# sourceMappingURL=searxng.min.js.map
